const { GoogleGenerativeAI } = require("@google/generative-ai"); const genAI = new GoogleGenerativeAI(process.env.AI3); const model = genAI.getGenerativeModel({ model: process.env.MODELS }); async function detectDomain(text){ try { const prompt = `Phân loại lĩnh vực của câu sau: "${text}". Chỉ trả về DUY NHẤT một trong hai từ: - IT - OTHER. Quy tắc: - Trả về IT nếu câu liên quan đến máy tính, phần cứng, phần mềm, lỗi máy, sửa PC, mạng, công nghệ, thiết bị điện tử, game lỗi, hệ điều hành, IT support. - Hiểu cả từ lóng, sai chính tả, viết tắt, ngôn ngữ Gen Z (vd: pc lag vl, win lỗi, ko boot, máy đơ, game crash). - Tuyệt đối không trả về thêm bất kỳ ký tự nào khác. - Không giải thích.`; const result = await model.generateContent(prompt); let output = (await result.response.text()).trim().toUpperCase(); output = output.replace(/[^A-Z]/g, "").trim(); if (output === "IT") return "IT"; return "OTHER"; } catch (err) { console.error("[detectDomain ERR]", err.message); return "OTHER"; }} module.exports = { detectDomain };
